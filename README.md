# Домашнее задание к занятию «Базы данных, их типы» - `Соловьев Д.В`

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

---

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

Ответ: в этом случае лучше всего подойдет SQL ориентированная СУБД. Конкретно можно взять самую популярную PostgreSQL - почему именнто эту? Потому что специалистов которые смогут её разрабатывать и обслуживать много и поэтому в целом компании не придется переплачивать за "редкую архитектуру" СУБД, притом что функциональные возможности других решений в данном конктретном случае не нужны. Функционала "постгри" вполне хватит для исполнения запросов/выборок структурированных данных из редкоизменяющихся таблиц. На рынке достаточно типовых решений для малого бизнеса на базе PostgreSQL которые можно грубо говоря скачать и поставить, и у них еще есть потенциал к расширению.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

Ответ: можно попробовать интегрировать Redis в архитектуру проекта и загонять хэши на более длительный срок хранения, чтобы СУБД их постоянно не "регенерировала".

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

Ответ: в этом случае вполне уместно и органично в систему интегрируется ElasticSearch(для снятие первичных данных с лендингов), CRM c долгосрочной отчетностью можно поднять на PostgreSQL. Настроить ежедневную ночную выгрузку данных из одной БД в другую если  не критично для компании оперативный доступ к данным. В этом случае быстрота наполнения и гибкость СУБД ElasticSearch на первом этапе, будет дополняться удобстовом эксплуатации на втором этапе(обработки данных и интеграции их в популярные нынче CRM). Можно сделать аархитектуру с 1 БД т.е. только с ElasticSearch, но она не обеспечивает необходимой надежности на данном этапе(пока данный продукт не станет полноценной СУБД).

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

Ответ: ответ дан в предыдущем вопросе.

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

Ответ: в этом случае лучше всего подойдет MongoDB - это самое простое и очевидное решение. В свободном доступе очень много готовых решений которые обладают доступным и понятным GUI, через который данную СУБД сможет обслуживать даже не профессионал.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

Ответ: да вполне можно присоседить эти данные в PostgreSQL, для администрирования и редактирования состава БД можно поставить например PGAdmin или DBeaver. И поднять для просмотра данных простой веб сервер - читающий данные с БД.

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

Ответ: в этом случае можно построить архитектуру на основе СУБД ArangoDB.  ArangoDB поддерживает масштабирующиеся запросы к графовым данным. Все данные в ArangoDB во внешнем представлении выглядят как JSON и аналогично структурированные документы, которые могут быть объединены в коллекции — подобие таблицы в реляционных базах данных. Но внутренний формат хранения — другой, это собственный двоичный формат ArangoDB’s VelocyPack. Упаковка и распаковка данных из JSON в коллекции и обратно осуществляется прозрачно для программиста. Также очень удобно что СУБД поддерживает работу с базой данных осуществляется при помощи SQL-подобного языка запросов AQL (ArangoDB Query Language). Язык является декларативным и позволяет свободно комбинировать все поддерживаемые модели данных в одном запросе.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

Ответ: можно, СУБД поддерживает аналогичный SQL язык запросов и поэтому вполне можно будет выполнять выборки и запросы необходимые отделу закупок.

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Ответ: Все это вполне можно реализовать на PostgreSQL приложив для некоторых задач чуть больше усилий.

*Приведите ответ в свободной форме.*

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

Ответ: 1. Сознание snapshot согласованного исходного состояния БД. 2. Блокировка изменямых полей, ожидание подтверждения от всех участников. 3. Отправка запроса на увеличение значения поля назначения, ожидание ответа от СУБД назначения.4. Проверка значения поля назначения на СУБД. 5. Уменьшение поля источника. 6. Проверка согласованости, снятие блокировки полей.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Ответ: первым действием добавилаась бы проверка досстаточности денег на счету источника.

*Приведите ответ в свободной форме.*

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

Ответ:

SQL-базы данных обычно используют реляционную модель, где данные хранятся в таблицах, связанных с друг другом. Данные в таблицах структурированы по строгим правилам и могут быть связаны с помощью внешних ключей. Эта структура данных делает SQL-базы данных хорошо подходящими для хранения и обработки структурированных данных. Однако эта модель не подходит для хранения неструктурированных данных, таких как изображения, звуковые файлы, видеоматериалы и т. д.

NoSQL-базы данных используют нереляционную модель хранения данных, где данные могут храниться в виде «ключ-значение», документов, графов и т. д. В NoSQL-базах данных нет строгих правил для организации данных, что делает их более гибкими для хранения различных типов данных и структур. Однако эта гибкость может повредить производительности при обработке данных в некоторых случаях.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*

Ответ: для этой цели подойдут NoSQL СУБД которые гибко масштабируются под распределенную модель. В частности можно взять MongoDB.
Почему именна эта СУБД:
1. Богатый язык запросов, поддерживающий текстовый поиск, агрегирование и CRUD-операции.
2. По сравнению с реляционными базами данных требует меньше операций ввода/вывода из-за встраиваемых моделей данных (embedded data model). Для ускорения выполнения запросов есть поддержка индексов.
3. Отказоустойчивость обеспечивается через репликацию наборов данных. Репликация обеспечивает хранение данных на нескольких серверах, что создает избыточность и высокую доступность.
4. Поддержка механизма шардинга для горизонтального масштабирования. Позволяет с меньшими затратами обрабатывать увеличивающийся объем данных (по сравнению с вертикальными способами масштабирования).
5. Поддержка нескольких движков хранения, что позволяет выбирать оптимальный в зависимости от типа рабочей нагрузки.

---

Задания,помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже разобраться в материале.
